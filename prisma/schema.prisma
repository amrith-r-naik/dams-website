// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Dog {
  dog_id           Int            @id @default(autoincrement())
  dog_name         String
  age              Int
  sex              String
  description      String?
  photo            String?
  status           String
  intake_date      DateTime
  medicalHistories MedicalHistory[]
  adoptions        Adoption[]
  breed_id         Int
  breed            Breed          @relation(fields: [breed_id], references: [breed_id])
  belongs_to       Shelter        @relation(fields: [shelter_id], references: [shelter_id])
  shelter_id       Int
}

model Breed {
  breed_id   Int     @id @default(autoincrement())
  breed_name String
  dogs       Dog[]
}

model MedicalHistory {
  medical_history_id Int      @id @default(autoincrement())
  disease_history    String?
  vaccination_status String
  dog_id             Int
  dog                Dog      @relation(fields: [dog_id], references: [dog_id])
}

model Adopter {
  adopter_id          Int         @id @default(autoincrement())
  name                String
  address             String
  phone_no            String
  email               String
  living_situation    String
  lifestyle           String
  experience_with_dogs String
  adoptions           Adoption[]
}

model Adoption {
  adoption_id   Int      @id @default(autoincrement())
  adaptation_date DateTime
  dog_id         Int
  dog            Dog      @relation(fields: [dog_id], references: [dog_id])
  adopter_id     Int
  adopter        Adopter  @relation(fields: [adopter_id], references: [adopter_id])
}

model Shelter {
  shelter_id  Int     @id @default(autoincrement())
  shelter_name String
  phone_no    String
  email       String
  address     String
  website     String?
  dogs        Dog[]
  staff       Staff[]
}

model Staff {
  staff_id  Int     @id @default(autoincrement())
  name      String
  email     String
  username  String
  password  String
  shelter_id Int
  shelter   Shelter @relation(fields: [shelter_id], references: [shelter_id])
}
